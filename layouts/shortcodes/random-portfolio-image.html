<!-- From Claude -->
{{ $width := default "600" (.Get "width") }}
{{ $height := default "250" (.Get "height") }}
{{ $position := default "center" (.Get "position") }}

<div 
  id="featured-portfolio" 
  class="featured-portfolio position-{{ $position }}"
  style="max-width: {{ $width }}px; height: {{ $height }}px;"
>
  <!-- Image and caption will be inserted here by JavaScript -->
</div>

{{ partial "portfolio-data.html" . }}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const featuredPortfolio = document.getElementById('featured-portfolio');
    
    // If we have images, select a random one
    if (portfolioImages && portfolioImages.length > 0) {
      // Get a random index each time the page loads
      const randomIndex = Math.floor(Math.random() * portfolioImages.length);
      const randomImage = portfolioImages[randomIndex];
      
      // Create the caption first (this will be placed above the image)
      const captionDiv = document.createElement('div');
      captionDiv.className = 'image-caption';
      
      const titleElement = document.createElement('h3');
      titleElement.textContent = randomImage.title;
      
      const descElement = document.createElement('p');
      descElement.textContent = randomImage.description;
      
      // Create the image element
      const imageElement = document.createElement('img');
      imageElement.src = randomImage.src;
      imageElement.alt = randomImage.title;
      imageElement.className = 'featured-portfolio-image';
      imageElement.title = randomImage.description;
      
      // Assemble all elements - caption first, then image
      captionDiv.appendChild(titleElement);
      captionDiv.appendChild(descElement);
      
      featuredPortfolio.appendChild(captionDiv);
      featuredPortfolio.appendChild(imageElement);
    } else {
      // No images found
      const emptyMessage = document.createElement('p');
      emptyMessage.textContent = 'No portfolio images available';
      featuredPortfolio.appendChild(emptyMessage);
      featuredPortfolio.classList.add('empty');
    }
  });
</script>